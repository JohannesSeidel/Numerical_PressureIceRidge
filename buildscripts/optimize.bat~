@echo off

cls

mkdir -p ./optimize/bin ./optimize/obj ./optimize/mod ./output/save ./output/vtk ./output/csv ./output/ridge

gfortran -O3 -c init_random_seed.f08

gfortran -O3 -c type_ContactData.f08
gfortran -O3 -c type_AABB.f08
gfortran -O3 -c type_Quaternion.f08
gfortran -O3 -c type_Ridge.f08
gfortran -O3 -c type_Iceblock.f08
gfortran -O3 -c type_Element.f08
gfortran -O3 -c type_Wall.f08

gfortran -O3 -c mod_Constants.f08
gfortran -O3 -c mod_Functions.f08
gfortran -O3 -c mod_Global.f08
gfortran -O3 -c mod_Output.f08
gfortran -O3 -c mod_Neighbour.f08
gfortran -O3 -c mod_OverlapComputation.f08
gfortran -fopenmp -O3 -c mod_Force.f08
gfortran -fopenmp -O3 -c mod_Particle.f08
gfortran -O3 -c mod_ImportExport.f08
gfortran -fopenmp -O3 -c mod_PredCorr.f08
gfortran -O3 -c Main.f08

gfortran *.o -fopenmp -O3 -o NumRidge

copy NumRidge.exe ./optimize/bin
move *.mod ./optimize/mod
move *.o ./optimize/obj
